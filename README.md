# Задание

Необходимо спроектировать и разработать Django-сервис друзей.

Сервис должен предоставлять возможности:
- зарегистрировать нового пользователя
- отправить одному пользователю заявку в друзья другому
- принять/отклонить пользователю заявку в друзья от другого пользователя
- посмотреть пользователю список своих исходящих и входящих заявок в друзья
- посмотреть пользователю список своих друзей
- получить пользователю статус дружбы с каким-то другим пользователем (нет ничего / есть исходящая заявка / есть входящая заявка / уже друзья)
- удалить пользователю другого пользователя из своих друзей
- если пользователь1 отправляет заявку в друзья пользователю2, а пользователь2 отправляет заявку пользователю1, то они автоматом становятся друзьями, их заявки автоматом принимаются

Модель пользователя может быть самой простой:
- id
- username

Необходимо:
- описать REST интерфейс сервиса с помощью OpenAPI
- написать на Django сервис по этой спецификации
- описать краткую документацию с примерами запуска сервиса и вызова его API

Выходные артефакты:
- Исходный код
- OpenAPI спецификация
- документация с описанием запуска и примерами использования API

_______________
## **Django Friends API**
API для работы с сервисом друзей.
### **Установка и запуск**
Убедитесь, что у вас установлен Python версии 3.x.  
Склонируйте репозиторий с проектом:
```bash
git clone https://github.com/PlungedInCode/VkInfoSummer2023
```
Перейдите в директорию и установите зависимости:
```bash
cd friendService 
pip install -r requirements.txt
```
Выполните миграции базы данных и запустите сервер:
```bash
python manage.py migrate
python manage.py runserver
```
Теперь сервер доступен по адресу: [http://localhost:8000/](http://localhost:8000/).

Также можно запустить через Docker:
```bash
docker-compose up --build
```

### **Описание комманд**
#### Регистрация нового пользователя
URL : /register/  

Метод : POST  

Параметры запроса:

* username (обязательный) - имя пользователя.

Пример запроса:

```bash
curl -X POST -H "Content-Type: application/json" -d '{"username": "john"}' http://localhost:8000/register/
```
Пример ответа:
```json
{
  "id": 1,
  "username": "john"
}
```

---

#### **Отправка заявки в друзья**

URL: /friend-requests/

Метод: POST

Параметры запроса:

   * sender (обязательный) - ID пользователя, отправляющего заявку.
   * recipient (обязательный) - ID пользователя, к которому отправляется заявка.

Пример запроса:

```bash
curl -X POST -H "Content-Type: application/json" -d '{"sender": 1, "recepient": 2}' http://localhost:8000/friend-requests/
```
Пример ответа:
```json

{
  "id": 1,
  "sender": 1,
  "recipient": 2,
  "status": "pending"
}
```

---

#### **Принять/отклонить заявки в друзья**

URL: /friend-requests/<int:request_id>/

Метод: PUT

Параметры запроса:
	
   * status (обязательный) - статус заявки (accepted или rejected)

Пример запроса:

```bash
curl -X PUT -H "Content-Type: application/json" -d '{"status": "accepted"}' http://localhost:8000/friend-request/1/
```
Пример ответа:
```json
{
  "id": 1,
  "sender": 1,
  "recipient": 2,
  "status": "accepted"
}
```
---
#### **Посмотреть список исходящих и входящих заявок в друзья пользователя**

URL: user/<int:user_id>/friend-requests/

Метод: GET

Параметры запроса:
	
   * user_id (обязательный) - ID пользователя

Пример запроса:

```bash
curl -X PUT -H  http://localhost:8000/user/1/friend-requests/
```
Пример ответа:
```json
{
  "Входящие заявки": [
    {
      "id": 2,
      "status": "pending",
      "sender": 3,
      "recipient": 1
    }
  ],
  "Исходящие заявки": [
    {
      "id": 1,
      "status": "pending",
      "sender": 1,
      "recipient": 2
    }
  ]
}
```
___


#### **Посмотреть список друзей**

URL: /user/<int:user_id>/friends/

Метод: GET

Параметры запроса:
	
   * user_id (обязательный) - ID пользователя

Пример запроса:

```bash
curl -X GET http://localhost:8000/user/1/friends/
```
Пример ответа:
```json
[
  {
    "id": 2,
    "username": "User2"
  },
  {
    "id": 3,
    "username": "User4"
  }
]
```
___
#### **Получить статус дружбы**

URL: user/<int:user_id>/friendship-status/<int:target_user_id>/

Метод: GET

Параметры запроса:
	
   * user_id (обязательный) - ID пользователя 1
   * target_user_id (обязательный) - ID пользователя 2
   
 Ответ :
   * нет ничегоесть
   * есть исходящая заявка
   * есть входящая заявка
   * уже друзья
 

Пример запроса:

```bash
curl -X GET http://localhost:8000/user/1/friendship-status/2
```
Пример ответа:
```json
{
  "Статус": "есть входящая заявка"
}
```
---

#### **Удалить другого пользователя из друзей**

URL: friendship/<int:friendship_id>/ 

Метод: DELETE

Параметры запроса:
	
   * friendship_id - ID дружбы

Пример запроса:

```bash
curl -X GET http://localhost:8000/friendship/1/ 
```
Пример ответа:
```json
{
  "Статус": "Дружба удалена успешно"
}
```